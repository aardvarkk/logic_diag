grammar Grammar
  rule commandset
    command+
  end

  rule command
    identifier ws+ command_detail? comment_to_eol? "\n"
  end

  rule command_detail
    assign_expr | expr
  end

  rule assign_expr
    identifier ws* ":=" ws* expr
  end

  rule expr
    or_expr | and_expr
  end

  rule or_expr
    and_expr ws+ "OR" ws+ and_expr
  end

  rule and_expr
    [^ #\n]+
  end

  rule identifier
    [a-zA-Z0-9]+
  end

  rule comment_to_eol
    ws* "#" [^\n]*
  end

  rule ws
    [ ]
  end
end